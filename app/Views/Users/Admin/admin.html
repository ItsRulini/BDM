<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FootGG - Dashboard Administrador</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/admin.css">

    <link rel="icon" type="image/png" href="assets/isotipo.png">
</head>
<body>
    <nav class="navbar">
        <div class="logo">
            <a href="index.php?controller=admin&action=index">
                <img src="assets/isologo white.png" alt="FootGG Logo" class="logo-image">
            </a>
        </div>

        <ul class="nav-menu">
            <li><a href="index.php?controller=admin&action=index" class="active">Inicio Admin</a></li>
            <li><a href="index.php?controller=admin&action=posts">Posts</a></li>
            <li><a href="index.php?controller=admin&action=perfil">Mi Perfil</a></li>
            <li><a href="index.php?controller=api&action=logout">Cerrar Sesión</a></li>
        </ul>
        <div class="hamburger" onclick="toggleMobileMenu()">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </nav>
    <div class="mobile-menu" id="mobileMenu">
        <ul>
            <li><a href="index.php?controller=admin&action=index">Inicio Admin</a></li>
            <li><a href="index.php?controller=admin&action=posts">Posts</a></li>
            <li><a href="index.php?controller=admin&action=perfil">Mi Perfil</a></li>
            <li><a href="index.php?controller=api&action=logout">Cerrar Sesión</a></li>
        </ul>
    </div>

    <main class="main-content">
        <section class="admin-header">
            <div class="admin-welcome">
                <h1><i class="fas fa-user-shield"></i> Dashboard Administrador</h1>
                <p>Gestiona los mundiales y el contenido de FootGG</p>
            </div>
            <div class="admin-actions">
                <button class="create-mundial-btn" onclick="goToCreateMundial()">
                    <i class="fas fa-plus"></i> Crear Nuevo Mundial
                </button>
                <button class="manage-categories-btn" onclick="openCategoryModal()">
                    <i class="fas fa-tags"></i> Gestionar Categorías
                </button>
                <button class="create-player-btn" onclick="openPlayerModal()">
                    <i class="fas fa-user"></i> Dar de alta un jugador
                </button>
                <button class="add-country-btn" onclick="openCountryModal()">
                    <i class="fas fa-globe-americas"></i> Agregar país
                </button>
            </div>
        </section>

        <section class="admin-stats">
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-globe-americas"></i>
                </div>
                <div class="stat-info">
                    <h3 id="totalMundiales">22</h3>
                    <p>Mundiales Creados</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-file-alt"></i>
                </div>
                <div class="stat-info">
                    <h3 id="totalPosts">156</h3>
                    <p>Posts Pendientes</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-users"></i>
                </div>
                <div class="stat-info">
                    <h3 id="totalUsers">1,249</h3>
                    <p>Usuarios Registrados</p>
                </div>
            </div>
        </section>
        
        <section class="world-cups-section">
            <h2 class="section-title">
                <i class="fas fa-globe-americas"></i> Mundiales Creados
            </h2>
            <div class="world-cups-grid" id="worldCupsGrid">
                <!-- Los mundiales se cargarán dinámicamente aquí -->
            </div>
        </section>
    </main>

    <!-- Modal de Gestión de Categorías -->
    <div class="modal-overlay" id="categoryModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">
                    <i class="fas fa-tags"></i> Gestionar Categorías
                </h2>
                <button class="close-modal" onclick="closeCategoryModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="categories-container">
                <div class="categories-grid" id="categoriesGrid">
                    <!-- Las categorías se cargarán dinámicamente aquí -->
                </div>
            </div>

            <!-- Formulario para nueva categoría -->
            <div class="category-form" id="categoryForm">
                <div class="form-group">
                    <label class="form-label" for="categoryName">
                        <i class="fas fa-tag"></i> Nombre de la Categoría
                    </label>
                    <input 
                        type="text" 
                        id="categoryName" 
                        class="form-input" 
                        placeholder="Ingresa el nombre de la categoría..."
                        maxlength="50"
                    >
                </div>
                <div class="form-actions">
                    <button class="btn-secondary" onclick="cancelCategoryForm()">
                        <i class="fas fa-times"></i> Cancelar
                    </button>
                    <button class="btn-primary" onclick="saveCategory()">
                        <i class="fas fa-save"></i> Guardar Categoría
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Registro de Jugador -->
    <div class="modal-overlay" id="playerModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">
                    <i class="fas fa-user"></i> Registrar Jugador
                </h2>
                <button class="close-modal" onclick="closePlayerModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="player-form-container">
                <form id="playerForm" class="category-form active">
                    <div class="form-group">
                        <label class="form-label" for="playerName">
                            <i class="fas fa-user"></i> Nombre Completo
                        </label>
                        <input 
                            type="text" 
                            id="playerName" 
                            class="form-input" 
                            placeholder="Ej: Lionel Messi"
                            maxlength="255"
                            required
                        >
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="playerNationality">
                            <i class="fas fa-flag"></i> Nacionalidad
                        </label>
                        <select id="playerNationality" class="form-input" required>
                            <option value="">Selecciona una nacionalidad...</option>
                            <!-- Las opciones se cargarán dinámicamente -->
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="playerBirthdate">
                            <i class="fas fa-calendar"></i> Fecha de Nacimiento
                        </label>
                        <input 
                            type="date" 
                            id="playerBirthdate" 
                            class="form-input"
                            required
                        >
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="playerPhoto">
                            <i class="fas fa-camera"></i> Fotografía
                        </label>
                        <div class="photo-upload-container">
                            <input 
                                type="file" 
                                id="playerPhoto" 
                                accept="image/*"
                                style="display: none;"
                                onchange="previewPlayerPhoto(event)"
                            >
                            <div class="photo-preview" id="playerPhotoPreview" onclick="document.getElementById('playerPhoto').click()">
                                <i class="fas fa-camera"></i>
                                <p>Haz clic para seleccionar foto</p>
                                <span>JPG, PNG o WEBP (máx. 5MB)</span>
                            </div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn-secondary" onclick="closePlayerModal()">
                            <i class="fas fa-times"></i> Cancelar
                        </button>
                        <button type="submit" class="btn-primary" onclick="savePlayer(event)">
                            <i class="fas fa-save"></i> Registrar Jugador
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal de Registro de País -->
    <div class="modal-overlay" id="countryModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">
                    <i class="fas fa-globe-americas"></i> Agregar País
                </h2>
                <button class="close-modal" onclick="closeCountryModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="country-form-container">
                <form id="countryForm" class="category-form active">
                    <div class="form-group">
                        <label class="form-label" for="countryName">
                            <i class="fas fa-flag"></i> Nombre del País
                        </label>
                        <input 
                            type="text" 
                            id="countryName" 
                            class="form-input" 
                            placeholder="Ej: Brasil"
                            maxlength="255"
                            required
                        >
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="countryNationality">
                            <i class="fas fa-id-card"></i> Nacionalidad
                        </label>
                        <input 
                            type="text" 
                            id="countryNationality" 
                            class="form-input" 
                            placeholder="Ej: Brasileña"
                            maxlength="255"
                            required
                        >
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn-secondary" onclick="closeCountryModal()">
                            <i class="fas fa-times"></i> Cancelar
                        </button>
                        <button type="submit" class="btn-primary" onclick="saveCountry(event)">
                            <i class="fas fa-save"></i> Guardar País
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <footer class="site-footer">
        <div class="footer-content">
            <div class="footer-logo">
                <img src="assets/isologo white.png" alt="FootGG Logo">
                <p>Tu fuente #1 para todo sobre la Copa del Mundo.</p>
            </div>
            <div class="footer-links">
                <h4>Navegación</h4>
                <ul>
                    <li><a href="index.php?controller=admin&action=index">Inicio Admin</a></li>
                    <li><a href="index.php?controller=admin&action=posts">Posts</a></li>
                    <li><a href="index.php?controller=admin&action=perfil">Mi Perfil</a></li>
                    <li><a href="index.php?controller=api&action=logout">Cerrar Sesión</a></li>
                </ul>
            </div>
            <div class="footer-social">
                <h4>Síguenos</h4>
                <a href="#"><i class="fab fa-instagram"></i></a>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 FootGG. Todos los derechos reservados.</p>
        </div>
    </footer>

    <script src="js/tools.js"></script>
    <script src="js/admin.js"></script> 
</body>
</html>